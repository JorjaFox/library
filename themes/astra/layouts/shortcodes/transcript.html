{{ $date := $.Page.Date.Format "2006" }}

<table class="table table-striped table-borderless table-hover table-transcripts">

	<thead class="table-success">
		<tr>
			<th scope="col" width="30%">Date</th>
			<th scope="col" width="70%">Source</th>
		</tr>
	</thead>

	<tbody>
	{{ range where $.Page.Site.Pages.ByDate "Section" "transcript" }}
		{{ $thisdate := .Date.Format "2006" }}

		{{ if and (eq $date $thisdate) (ne .Params.topic "index") (isset .Params "interviewurl") }}
			<tr>
				<td>{{ .Date.Format "January 02" }}</td>
				<td>
					<a href="{{ .Permalink }}">{{ htmlUnescape .Title }}</a>
					{{ if not .Lastmod.IsZero }}
						<script>
							// Current Date
							var pubdate = new Date( {{ .Date }} );
							var nowdate = new Date();
							var diff    = parseInt( ( nowdate.getTime() - pubdate.getTime() ) / ( 1000 * 60  * 60 * 24 ) );

							if ( diff <=  30 )
								document.write( "<span class='badge rounded-pill bg-success'>NEW!</span>" );
							javascript: ;
						</script>
					{{ end }}

				</td>
			</tr>
		{{ end }}
	{{ end }}
	</tbody>
</table>
