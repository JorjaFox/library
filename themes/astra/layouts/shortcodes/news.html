{{ $date := $.Page.Date.Format "2006" }}

<table class="table table-striped table-bordered table-hover">

	<thead class="thead-dark">
		<tr>
			<th scope="col" width="20%">Date</th>
			<th scope="col" width="20%">Source</th>
			<th scope="col" width="60%">Title</th>
		</tr>
	</thead>

	<tbody>
	{{ range where $.Page.Site.Pages.ByDate "Section" "news" }}
		{{ $thisdate := .Date.Format "2006" }}

		{{ if and (eq $date $thisdate) (ne .Params.topic "index") (isset .Params "newstitle") }}
			<tr>
				<td>{{ .Date.Format "January 02" }}</td>
				<td><a href="{{ .Permalink }}">{{ .Params.newssource }}</a></td>
				<td>
					{{ htmlUnescape .Params.newstitle }}
					{{ if not .Lastmod.IsZero }}
						{{ $timesince := div (sub now.Unix .Lastmod.Unix) 43200 }}
						{{ if le $timesince 30 }}<span class="badge rounded-pill bg-success">NEW!</span>{{ end }}
					{{ end }}

				</td>
			</tr>
		{{ end }}
	{{ end }}
	</tbody>
</table>
