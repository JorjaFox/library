{{ $date := $.Page.Date.Format "2006" }}

<table class="table table-striped table-borderless table-hover table-news">

	<thead class="table-success">
		<tr>
			<th scope="col" width="20%">Date</th>
			<th scope="col" width="20%">Source</th>
			<th scope="col" width="60%">Title</th>
		</tr>
	</thead>

	<tbody>
	{{ range where $.Page.Site.Pages.ByDate "Section" "news" }}
		{{ $thisdate := .Date.Format "2006" }}

		{{ if and (eq $date $thisdate) (ne .Params.topic "index") (isset .Params "newstitle") }}
			<tr>
				<td>{{ .Date.Format "January 02" }}</td>
				<td><a href="{{ .Permalink }}">{{ .Params.newssource }}</a></td>
				<td>
					{{ htmlUnescape .Params.newstitle }}
					{{ if not .Lastmod.IsZero }}
						<script>
							// Current Date
							var pubdate = new Date( {{ .Date }} );
							var nowdate = new Date();
							var diff    = parseInt( ( nowdate.getTime() - pubdate.getTime() ) / ( 1000 * 60  * 60 * 24 ) );

							if ( diff <=  30 )
								document.write( "<span class='badge rounded-pill bg-success'>NEW!</span>" );
							javascript: ;
						</script>
					{{ end }}

				</td>
			</tr>
		{{ end }}
	{{ end }}
	</tbody>
</table>
